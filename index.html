<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Matematik OyunlarÄ± â€” matbilzek</title>
  <meta name="description" content="EÄŸitsel matematik oyunlarÄ± â€” Ä°lkokul, Ortaokul(6. sÄ±nÄ±f) ve HafÄ±za oyunlarÄ±. Mobil uyumlu." />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css" />
  <!-- Firebase kullanÄ±yorsanÄ±z uncomment edin -->
  <!-- <script src="firebase-config.js"></script> -->
</head>
<body>
  <header class="site-header">
    <div class="bar">
      <a class="logo" href="/">Matematik OyunlarÄ±</a>
    </div>
    <div class="subbar">
      <div class="tabs">
        <button class="tab active" data-target="home">Ana Sayfa</button>
        <button class="tab" data-target="ilkokul">Ä°LKOKUL</button>
        <button class="tab" data-target="ortaokul">ORTAOKUL (6. SÄ±nÄ±f)</button>
        <button class="tab" data-target="hafiza">HAFIZA OYUNLARI</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="home" class="panel">
      <h1>HoÅŸ geldin! Bir seviye seÃ§ ve oyna.</h1>
      <p>Ä°LKOKUL: Toplama, Ã‡Ä±karma, Ã‡arpma, BÃ¶lme. ORTAOKUL (6. sÄ±nÄ±f): asal sayÄ±lar, Ã§arpanlar, EBOB/EKOK, denk kesirler, kesir dÃ¶nÃ¼ÅŸÃ¼mleri, ortalama/ortanca/tepe-deÄŸer. HAFIZA: ÅŸekiller ve hafÄ±za kartlarÄ±.</p>

      <div class="cards">
        <article class="card">
          <h3>Ä°LKOKUL</h3>
          <p>Toplama, Ã‡Ä±karma, Ã‡arpma, BÃ¶lme â€” temel hesaplama oyunlarÄ±.</p>
          <div class="card-actions"><button class="btn go" data-target="ilkokul">Git</button></div>
        </article>
        <article class="card">
          <h3>ORTAOKUL (6. SÄ±nÄ±f)</h3>
          <p>Asal sayÄ±lar, Ã§arpanlar, EBOB/EKOK, denk kesirler, kesir dÃ¶nÃ¼ÅŸÃ¼mleri, ortalama/ortanca/tepe.</p>
          <div class="card-actions"><button class="btn go" data-target="ortaokul">Git</button></div>
        </article>
        <article class="card">
          <h3>HAFIZA OYUNLARI</h3>
          <p>Åžekiller & HafÄ±za KartlarÄ± â€” geliÅŸtirilmiÅŸ oyun deneyimi.</p>
          <div class="card-actions"><button class="btn go" data-target="hafiza">Git</button></div>
        </article>
      </div>
    </section>

    <!-- Ä°LKOKUL SEÃ‡Ä°M -->
    <section id="ilkokul" class="panel hidden">
      <h2>Ä°LKOKUL OYUNLARI</h2>
      <div class="cards">
        <article class="card"><h3>Toplama</h3><div class="card-actions"><button class="btn go" data-target="addition">Oyna</button></div></article>
        <article class="card"><h3>Ã‡Ä±karma</h3><div class="card-actions"><button class="btn go" data-target="subtraction">Oyna</button></div></article>
        <article class="card"><h3>Ã‡arpma</h3><div class="card-actions"><button class="btn go" data-target="multiplication">Oyna</button></div></article>
        <article class="card"><h3>BÃ¶lme</h3><div class="card-actions"><button class="btn go" data-target="division">Oyna</button></div></article>
      </div>
      <div class="back"><button class="btn tab" data-target="home">Geri</button></div>
    </section>

    <!-- ORTAOKUL SEÃ‡Ä°M -->
    <section id="ortaokul" class="panel hidden">
      <h2>ORTAOKUL (6. SINIF) OYUNLARI</h2>
      <div class="cards">
        <article class="card"><h3>Asal SayÄ±lar</h3><div class="card-actions"><button class="btn go" data-target="primes">Oyna</button></div></article>
        <article class="card"><h3>Ã‡arpanlar</h3><div class="card-actions"><button class="btn go" data-target="factors">Oyna</button></div></article>
        <article class="card"><h3>Ortak BÃ¶len / Ortak Kat (EBOB / EKOK)</h3><div class="card-actions"><button class="btn go" data-target="gcdlcm">Oyna</button></div></article>
        <article class="card"><h3>Denk Kesirler</h3><div class="card-actions"><button class="btn go" data-target="frac6">Oyna</button></div></article>
        <article class="card"><h3>Tam SayÄ±lÄ± Kesri â†’ BileÅŸik Kesre Ã‡evirme</h3><div class="card-actions"><button class="btn go" data-target="mixed">Oyna</button></div></article>
        <article class="card"><h3>Aritmetik Ortalama / Ortanca / Tepe DeÄŸer</h3><div class="card-actions"><button class="btn go" data-target="stats">Oyna</button></div></article>
      </div>
      <div class="back"><button class="btn tab" data-target="home">Geri</button></div>
    </section>

    <!-- HAFIZA SEÃ‡Ä°M -->
    <section id="hafiza" class="panel hidden">
      <h2>HAFIZA OYUNLARI</h2>
      <div class="cards">
        <article class="card"><h3>Åžekiller</h3><div class="card-actions"><button class="btn go" data-target="shapes">Oyna</button></div></article>
        <article class="card"><h3>HafÄ±za KartlarÄ±</h3><div class="card-actions"><button class="btn go" data-target="memory">Oyna</button></div></article>
      </div>
      <div class="back"><button class="btn tab" data-target="home">Geri</button></div>
    </section>

    <!-- TÃœM OYUN PANELLERÄ° -->

    <!-- 1. Toplama -->
    <section id="addition" class="panel hidden">
      <h2>Toplama Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="add-score">0</span></span><span>Kalan: <span id="add-remaining">10</span></span></div>
        <div class="question" id="add-question"></div>
        <div class="answers" id="add-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('addition')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('addition')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ilkokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const a = Math.floor(Math.random() * 20) + 1;
            const b = Math.floor(Math.random() * 20) + 1;
            const correct = a + b;
            let opts = [correct];
            while (opts.length < 4) { const w = correct + Math.floor(Math.random() * 11 - 5); if (w > 0 && !opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('add-question').textContent = `${a} + ${b} = ?`;
            const ans = document.getElementById('add-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('add-score').textContent = score; document.getElementById('add-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('addition', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 2. Ã‡Ä±karma -->
    <section id="subtraction" class="panel hidden">
      <h2>Ã‡Ä±karma Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="sub-score">0</span></span><span>Kalan: <span id="sub-remaining">10</span></span></div>
        <div class="question" id="sub-question"></div>
        <div class="answers" id="sub-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('subtraction')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('subtraction')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ilkokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const a = Math.floor(Math.random() * 30) + 10;
            const b = Math.floor(Math.random() * a);
            const correct = a - b;
            let opts = [correct];
            while (opts.length < 4) { const w = correct + Math.floor(Math.random() * 11 - 5); if (w >= 0 && !opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('sub-question').textContent = `${a} - ${b} = ?`;
            const ans = document.getElementById('sub-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('sub-score').textContent = score; document.getElementById('sub-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('subtraction', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 3. Ã‡arpma -->
    <section id="multiplication" class="panel hidden">
      <h2>Ã‡arpma Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="mul-score">0</span></span><span>Kalan: <span id="mul-remaining">10</span></span></div>
        <div class="question" id="mul-question"></div>
        <div class="answers" id="mul-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('multiplication')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('multiplication')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ilkokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const a = Math.floor(Math.random() * 10) + 1;
            const b = Math.floor(Math.random() * 10) + 1;
            const correct = a * b;
            let opts = [correct];
            while (opts.length < 4) { const w = correct + Math.floor(Math.random() * 21 - 10); if (!opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('mul-question').textContent = `${a} Ã— ${b} = ?`;
            const ans = document.getElementById('mul-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('mul-score').textContent = score; document.getElementById('mul-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('multiplication', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 4. BÃ¶lme -->
    <section id="division" class="panel hidden">
      <h2>BÃ¶lme Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="div-score">0</span></span><span>Kalan: <span id="div-remaining">10</span></span></div>
        <div class="question" id="div-question"></div>
        <div class="answers" id="div-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('division')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('division')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ilkokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const divisor = Math.floor(Math.random() * 9) + 2;
            const quotient = Math.floor(Math.random() * 10) + 1;
            const dividend = divisor * quotient;
            const correct = quotient;
            let opts = [correct];
            while (opts.length < 4) { const w = correct + Math.floor(Math.random() * 5 - 2); if (w > 0 && !opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('div-question').textContent = `${dividend} Ã· ${divisor} = ?`;
            const ans = document.getElementById('div-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('div-score').textContent = score; document.getElementById('div-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('division', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 5. Asal SayÄ±lar -->
    <section id="primes" class="panel hidden">
      <h2>Asal SayÄ±lar Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="prime-score">0</span></span><span>Kalan: <span id="prime-remaining">10</span></span></div>
        <div class="question" id="prime-question"></div>
        <div class="answers" id="prime-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('primes')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('primes')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const isPrime = n => { if (n <= 1) return false; for (let i = 2; i <= Math.sqrt(n); i++) if (n % i === 0) return false; return true; };
          const gen = () => {
            const num = Math.floor(Math.random() * 99) + 2;
            const correct = isPrime(num) ? 'Evet' : 'HayÄ±r';
            document.getElementById('prime-question').textContent = `${num} asal sayÄ± mÄ±?`;
            const ans = document.getElementById('prime-answers'); ans.innerHTML = '';
            ['Evet', 'HayÄ±r'].forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('prime-score').textContent = score; document.getElementById('prime-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('primes', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 6. Ã‡arpanlar -->
    <section id="factors" class="panel hidden">
      <h2>Ã‡arpanlar Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="fac-score">0</span></span><span>Kalan: <span id="fac-remaining">10</span></span></div>
        <div class="question" id="fac-question"></div>
        <div class="answers" id="fac-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('factors')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('factors')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const getFactors = n => { let f = []; for (let i = 1; i <= n; i++) if (n % i === 0) f.push(i); return f; };
          const gen = () => {
            const num = Math.floor(Math.random() * 50) + 10;
            const correct = getFactors(num).join(', ');
            let opts = [correct];
            while (opts.length < 4) {
              const wrong = getFactors(num); wrong[Math.floor(Math.random() * wrong.length)] += Math.random() > 0.5 ? 1 : -1;
              const wStr = wrong.join(', '); if (!opts.includes(wStr)) opts.push(wStr);
            }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('fac-question').textContent = `${num} sayÄ±sÄ±nÄ±n Ã§arpanlarÄ±?`;
            const ans = document.getElementById('fac-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('fac-score').textContent = score; document.getElementById('fac-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('factors', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 7. EBOB/EKOK -->
    <section id="gcdlcm" class="panel hidden">
      <h2>EBOB / EKOK Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="gcd-score">0</span></span><span>Kalan: <span id="gcd-remaining">10</span></span></div>
        <div class="question" id="gcd-question"></div>
        <div class="answers" id="gcd-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('gcdlcm')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('gcdlcm')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);
          const lcm = (a, b) => (a * b) / gcd(a, b);
          const gen = () => {
            const a = Math.floor(Math.random() * 30) + 5;
            const b = Math.floor(Math.random() * 30) + 5;
            const isGcd = Math.random() > 0.5;
            const correct = isGcd ? gcd(a, b) : lcm(a, b);
            let opts = [correct];
            while (opts.length < 4) { const w = correct + Math.floor(Math.random() * 11 - 5); if (w > 0 && !opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('gcd-question').textContent = `${a} ve ${b}'nin ${isGcd ? 'EBOB' : 'EKOK'}'u?`;
            const ans = document.getElementById('gcd-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('gcd-score').textContent = score; document.getElementById('gcd-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('gcdlcm', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 8. Denk Kesirler -->
    <section id="frac6" class="panel hidden">
      <h2>Denk Kesirler Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="frac-score">0</span></span><span>Kalan: <span id="frac-remaining">10</span></span></div>
        <div class="question" id="frac-question"></div>
        <div class="answers" id="frac-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('frac6')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('frac6')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const pay = Math.floor(Math.random() * 10) + 1;
            const payda = Math.floor(Math.random() * 9) + 2;
            const carp = Math.floor(Math.random() * 5) + 2;
            const correct = `${pay * carp}/${payda * carp}`;
            let opts = [correct];
            while (opts.length < 4) {
              const wrongPay = pay * carp + Math.floor(Math.random() * 5 - 2);
              const w = `${wrongPay}/${payda * carp}`; if (!opts.includes(w)) opts.push(w);
            }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('frac-question').textContent = `${pay}/${payda} ile denk kesir?`;
            const ans = document.getElementById('frac-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('frac-score').textContent = score; document.getElementById('frac-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('frac6', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 9. Mixed to Improper -->
    <section id="mixed" class="panel hidden">
      <h2>Tam SayÄ±lÄ± â†’ BileÅŸik Kesir</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="mix-score">0</span></span><span>Kalan: <span id="mix-remaining">10</span></span></div>
        <div class="question" id="mix-question"></div>
        <div class="answers" id="mix-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('mixed')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('mixed')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const gen = () => {
            const tam = Math.floor(Math.random() * 6) + 1;
            const pay = Math.floor(Math.random() * 8) + 1;
            const payda = Math.floor(Math.random() * 7) + 3;
            const correct = `${tam * payda + pay}/${payda}`;
            let opts = [correct];
            while (opts.length < 4) {
              const wrongPay = tam * payda + pay + Math.floor(Math.random() * 9 - 4);
              const w = `${wrongPay}/${payda}`; if (!opts.includes(w)) opts.push(w);
            }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('mix-question').innerHTML = `<strong>${tam} ${pay}/${payda}</strong> bileÅŸik kesir hali?`;
            const ans = document.getElementById('mix-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o === correct ? 'correct' : 'wrong'); if (o === correct) score++; remaining--; document.getElementById('mix-score').textContent = score; document.getElementById('mix-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('mixed', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 10. Stats -->
    <section id="stats" class="panel hidden">
      <h2>Ortalama / Ortanca / Tepe DeÄŸer</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="stat-score">0</span></span><span>Kalan: <span id="stat-remaining">10</span></span></div>
        <div class="question" id="stat-question"></div>
        <div class="answers" id="stat-answers"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('stats')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('stats')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="ortaokul">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 10;
          const mean = arr => (arr.reduce((a,b)=>a+b,0)/arr.length).toFixed(1);
          const median = arr => { const s = [...arr].sort((a,b)=>a-b); const m = Math.floor(s.length/2); return s.length%2===0 ? ((s[m-1]+s[m])/2).toFixed(1) : s[m]; };
          const mode = arr => { const f = {}; arr.forEach(n=>f[n]=(f[n]||0)+1); return Object.keys(f).reduce((a,b)=>f[b]>f[a]?b:a); };
          const gen = () => {
            const nums = Array.from({length: Math.floor(Math.random()*3)+5}, () => Math.floor(Math.random()*15)+1);
            const type = Math.floor(Math.random()*3);
            let correct, qType;
            if (type===0) { correct = mean(nums); qType = 'Aritmetik Ortalama'; }
            else if (type===1) { correct = median(nums); qType = 'Ortanca'; }
            else { correct = mode(nums); qType = 'Tepe DeÄŸer'; }
            let opts = [correct];
            while (opts.length < 4) { const w = (parseFloat(correct) + Math.random()*4 - 2).toFixed(1); if (!opts.includes(w)) opts.push(w); }
            opts.sort(() => Math.random() - 0.5);
            document.getElementById('stat-question').textContent = `${nums.join(', ')} sayÄ±larÄ±nÄ±n ${qType}'si?`;
            const ans = document.getElementById('stat-answers'); ans.innerHTML = '';
            opts.forEach(o => {
              const btn = document.createElement('button'); btn.className = 'answer-btn'; btn.textContent = o;
              btn.onclick = () => { btn.classList.add(o == correct ? 'correct' : 'wrong'); if (o == correct) score++; remaining--; document.getElementById('stat-score').textContent = score; document.getElementById('stat-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('stats', score)), 1000);
              };
              ans.appendChild(btn);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 11. Åžekiller -->
    <section id="shapes" class="panel hidden">
      <h2>Åžekiller Oyunu</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="shape-score">0</span></span><span>Kalan: <span id="shape-remaining">15</span></span></div>
        <div class="question" style="font-size:1.4rem;margin-bottom:1rem;">Hedef: <div id="target-shape-display" class="shape" style="display:inline-block;margin-left:1rem;"></div></div>
        <div class="mem-board" id="shape-board" style="grid-template-columns:repeat(4,1fr);"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('shapes')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('shapes')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="hafiza">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, remaining = 15;
          const shapes = ['circle','square','triangle','star'];
          const gen = () => {
            const target = shapes[Math.floor(Math.random()*shapes.length)];
            document.getElementById('target-shape-display').className = `shape ${target}`;
            const board = document.getElementById('shape-board'); board.innerHTML = '';
            let cards = [target, target];
            while (cards.length < 8) { const wrong = shapes.filter(s=>s!==target)[Math.floor(Math.random()*3)]; cards.push(wrong); }
            cards.sort(() => Math.random() - 0.5);
            cards.forEach(sh => {
              const div = document.createElement('div'); div.className = `shape ${sh}`;
              div.onclick = () => {
                if (div.dataset.clicked) return; div.dataset.clicked = true;
                div.style.transform = 'scale(1.1)'; div.style.opacity = '0.7';
                if (sh === target) { score++; div.style.background = '#b2ffba'; } else div.style.background = '#ff9e9e';
                document.getElementById('shape-score').textContent = score; remaining--; document.getElementById('shape-remaining').textContent = remaining;
                setTimeout(() => remaining > 0 ? gen() : (alert(`Bitti! Skor: ${score}`), window._saveLocalScore('shapes', score)), 800);
              };
              board.appendChild(div);
            });
          };
          gen();
        })();
      </script>
    </section>

    <!-- 12. HafÄ±za KartlarÄ± -->
    <section id="memory" class="panel hidden">
      <h2>HafÄ±za KartlarÄ±</h2>
      <div class="game-area">
        <div class="status-row"><span>Skor: <span id="mem-score">0</span></span><span>Ã‡ift: <span id="mem-pairs">0</span>/8</span></div>
        <div class="mem-board" id="mem-board"></div>
      </div>
      <div class="game-header controls" style="margin-top:1rem;">
        <button class="btn" onclick="window.renderLeaderboardForGame('memory')">Global Top 10</button>
        <button class="btn" onclick="window.submitScoreUI('memory')">Skor GÃ¶nder</button>
        <button class="btn tab" data-target="hafiza">Geri</button>
      </div>
      <script>
        (function() {
          let score = 0, pairsFound = 0, flipped = [], lock = false;
          const symbols = ['ðŸŽ','ðŸŒ','ðŸ‡','ðŸŠ','ðŸ‰','ðŸ“','ðŸ¥','ðŸ','ðŸŽ','ðŸŒ','ðŸ‡','ðŸŠ','ðŸ‰','ðŸ“','ðŸ¥','ðŸ'].sort(() => Math.random() - 0.5);
          const board = document.getElementById('mem-board');
          symbols.forEach(sym => {
            const card = document.createElement('div'); card.className = 'mem-card'; card.dataset.symbol = sym;
            card.onclick = () => {
              if (lock || flipped.length === 2 || card.classList.contains('flipped')) return;
              card.classList.add('flipped'); card.textContent = sym; flipped.push(card);
              if (flipped.length === 2) { lock = true; setTimeout(() => {
                if (flipped[0].dataset.symbol === flipped[1].dataset.symbol) {
                  flipped.forEach(c => c.classList.add('matched')); pairsFound++; score += 20;
                  document.getElementById('mem-pairs').textContent = pairsFound; document.getElementById('mem-score').textContent = score;
                  if (pairsFound === 8) setTimeout(() => { alert(`Tebrikler! Skor: ${score}`); window._saveLocalScore('memory', score); }, 500);
                } else {
                  flipped.forEach(c => { c.classList.remove('flipped'); c.textContent = ''; }); score = Math.max(0, score - 5); document.getElementById('mem-score').textContent = score;
                }
                flipped = []; lock = false;
              }, 1000); }
            };
            board.appendChild(card);
          });
        })();
      </script>
    </section>

    <!-- Leaderboard -->
    <section id="leaderboard" class="panel hidden">
      <h2 id="lb-title">Leaderboard</h2>
      <div id="lb-list" class="card" style="padding:0.6rem">YÃ¼kleniyor...</div>
      <div class="small muted" id="lb-source-note" style="margin-top:0.6rem">Kaynak:</div>
      <div style="margin-top:0.6rem"><button class="btn tab" data-target="home">Kapat</button></div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container">
      <p>Â© <span id="year"></span> matbilzek â€” EÄŸitsel matematik oyunlarÄ±</p>
      <p class="muted small">TÃ¼m oyunlar tamamlandÄ± ve Ã§alÄ±ÅŸÄ±r durumda!</p>
    </div>
  </footer>

  <script src="app.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    if ('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js').catch(() => {});
  </script>
</body>
</html>
