<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matematik Oyunları — Matbilzek</title>
<meta name="description" content="Eğitsel Matematik Oyunları — İlkokul(3. Sınıf), Ortaokul(5.,6.,7. ve 8. sınıf) ve Hafıza oyunları. Mobil uyumlu." />
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="site-header">
<div class="bar">
<a class="logo" href="/">Matematik Oyunları (Basit ve Hızlı) </a>
</div>
<div class="subbar">
<div class="tabs">
<button class="tab active" data-target="home">Ana Sayfa</button>
<button class="tab" data-target="ilkokul3">İLKOKUL(3.SINIF)</button>
<button class="tab" data-target="ilkokul4">İLKOKUL(4.SINIF)</button>
<button class="tab" data-target="ortaokul5">ORTAOKUL (5. Sınıf)</button>
<button class="tab" data-target="ortaokul6">ORTAOKUL (6. Sınıf)</button>
<button class="tab" data-target="ortaokul7">ORTAOKUL (7. Sınıf)</button>
<button class="tab" data-target="ortaokul8">ORTAOKUL (8. Sınıf)</button>
<button class="tab" data-target="hafiza">HAFIZA OYUNLARI</button>
</div>
</div>
</header>
<main class="container">
<section id="home" class="panel">
<h1>Hoş geldin! Sınıfını seç ve oyna.</h1>
<p><strong>Kurallar:</strong> Sınırsız süre. Her doğru cevap <strong>10 puan</strong>, arka arkaya <strong>3 doğru</strong> yapınca <strong>+15 bonus puan</strong>!</p>
<div class="cards">
<article class="card"><h3>İLKOKUL(3.SINIF)</h3><div class="card-actions"><button class="btn go" data-target="ilkokul3">Git</button></div></article>
<article class="card"><h3>İLKOKUL(4.SINIF)</h3><div class="card-actions"><button class="btn go" data-target="ilkokul4">Git</button></div></article>
<article class="card"><h3>ORTAOKUL (5. Sınıf)</h3><div class="card-actions"><button class="btn go" data-target="ortaokul5">Git</button></div></article> 
<article class="card"><h3>ORTAOKUL (6. Sınıf)</h3><div class="card-actions"><button class="btn go" data-target="ortaokul6">Git</button></div></article>
<article class="card"><h3>ORTAOKUL (7. Sınıf)</h3><div class="card-actions"><button class="btn go" data-target="ortaokul7">Git</button></div></article>
<article class="card"><h3>ORTAOKUL (8. Sınıf)</h3><div class="card-actions"><button class="btn go" data-target="ortaokul8">Git</button></div></article>
<article class="card"><h3>HAFIZA OYUNLARI</h3><div class="card-actions"><button class="btn go" data-target="hafiza">Git</button></div></article>
</div>
</section>

<section id="ilkokul3" class="panel hidden">
<h2>İLKOKUL OYUNLARI (3. SINIF) </h2>
<div class="cards">
<article class="card"><h3>Toplama</h3><div class="card-actions"><button class="btn go" data-target="addition">Oyna</button></div></article>
<article class="card"><h3>Çıkarma</h3><div class="card-actions"><button class="btn go" data-target="subtraction">Oyna</button></div></article>
<article class="card"><h3>Çarpma</h3><div class="card-actions"><button class="btn go" data-target="multiplication">Oyna</button></div></article>
<article class="card"><h3>Bölme</h3><div class="card-actions"><button class="btn go" data-target="division">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<section id="ilkokul4" class="panel hidden">
<h2>İLKOKUL OYUNLARI (4. SINIF) </h2>
<div class="cards">
<article class="card"><h3>Toplama</h3><div class="card-actions"><button class="btn go" data-target="addition">Oyna</button></div></article>
<article class="card"><h3>Çıkarma</h3><div class="card-actions"><button class="btn go" data-target="subtraction">Oyna</button></div></article>
<article class="card"><h3>Çarpma</h3><div class="card-actions"><button class="btn go" data-target="multiplication">Oyna</button></div></article>
<article class="card"><h3>Bölme</h3><div class="card-actions"><button class="btn go" data-target="division">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>  

<section id="ortaokul5" class="panel hidden">
<h2>ORTAOKUL (5. SINIF) OYUNLARI</h2>
<div class="cards">
<article class="card"><h3>Geometri Oyunu</h3><div class="card-actions"><button class="btn go" data-target="geometryGame">Oyna</button></div></article>
<article class="card"><h3>Açı Tahmin Oyunu</h3><div class="card-actions"><button class="btn go" data-target="angleGame">Oyna</button></div></article>
<article class="card"><h3>Çemberden Üçgene </h3><div class="card-actions"><button class="btn go" data-target="triangleCircleGame">Oyna</button></div></article>
<article class="card"><h3>Çok Basamaklı Sayılar</h3><div class="card-actions"><button class="btn go" data-target="numberGame">Oyna</button></div></article>
<article class="card"><h3>Tam Sayılı → Bileşik</h3><div class="card-actions"><button class="btn go" data-target="mixed">Oyna</button></div></article>
<article class="card"><h3>Ortalama / Ortanca / Tepe</h3><div class="card-actions"><button class="btn go" data-target="stats">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<section id="ortaokul6" class="panel hidden">
<h2>ORTAOKUL (6. SINIF) OYUNLARI</h2>
<div class="cards">
<article class="card"><h3>Asal Sayılar</h3><div class="card-actions"><button class="btn go" data-target="primes">Oyna</button></div></article>
<article class="card"><h3>Çarpanlar</h3><div class="card-actions"><button class="btn go" data-target="factors">Oyna</button></div></article>
<article class="card"><h3>Ortak Bölen / Ortak Kat</h3><div class="card-actions"><button class="btn go" data-target="gcdlcm">Oyna</button></div></article>
<article class="card"><h3>Denk Kesirler</h3><div class="card-actions"><button class="btn go" data-target="frac6">Oyna</button></div></article>
<article class="card"><h3>Tam Sayılı → Bileşik</h3><div class="card-actions"><button class="btn go" data-target="mixed">Oyna</button></div></article>
<article class="card"><h3>Ortalama / Ortanca / Tepe</h3><div class="card-actions"><button class="btn go" data-target="stats">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<section id="ortaokul7" class="panel hidden">
<h2>ORTAOKUL (7. SINIF) OYUNLARI</h2>
<div class="cards">
<article class="card"><h3>Asal Sayılar</h3><div class="card-actions"><button class="btn go" data-target="primes">Oyna</button></div></article>
<article class="card"><h3>Çarpanlar</h3><div class="card-actions"><button class="btn go" data-target="factors">Oyna</button></div></article>
<article class="card"><h3>EBOB / EKOK</h3><div class="card-actions"><button class="btn go" data-target="gcdlcm">Oyna</button></div></article>
<article class="card"><h3>Denk Kesirler</h3><div class="card-actions"><button class="btn go" data-target="frac6">Oyna</button></div></article>
<article class="card"><h3>Tam Sayılı → Bileşik</h3><div class="card-actions"><button class="btn go" data-target="mixed">Oyna</button></div></article>
<article class="card"><h3>Ortalama / Ortanca / Tepe</h3><div class="card-actions"><button class="btn go" data-target="stats">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<section id="ortaokul8" class="panel hidden">
<h2>ORTAOKUL (8. SINIF) OYUNLARI</h2>
<div class="cards">
<article class="card"><h3>Asal Sayılar</h3><div class="card-actions"><button class="btn go" data-target="primes">Oyna</button></div></article>
<article class="card"><h3>Çarpanlar</h3><div class="card-actions"><button class="btn go" data-target="factors">Oyna</button></div></article>
<article class="card"><h3>EBOB / EKOK</h3><div class="card-actions"><button class="btn go" data-target="gcdlcm">Oyna</button></div></article>
<article class="card"><h3>Denk Kesirler</h3><div class="card-actions"><button class="btn go" data-target="frac6">Oyna</button></div></article>
<article class="card"><h3>Tam Sayılı → Bileşik</h3><div class="card-actions"><button class="btn go" data-target="mixed">Oyna</button></div></article>
<article class="card"><h3>Ortalama / Ortanca / Tepe</h3><div class="card-actions"><button class="btn go" data-target="stats">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<section id="hafiza" class="panel hidden">
<h2>HAFIZA OYUNLARI</h2>
<div class="cards">
<article class="card"><h3>Şekiller</h3><div class="card-actions"><button class="btn go" data-target="shapes">Oyna</button></div></article>
<article class="card"><h3>Hafıza Kartları</h3><div class="card-actions"><button class="btn go" data-target="memory">Oyna</button></div></article>
</div>
<div class="back"><button class="btn tab" data-target="home">Geri</button></div>
</section>

<!-- Tüm Oyun Panelleri -->
<section id="addition" class="panel hidden">
<h2>Toplama Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="add-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="add-question"></div>
<div class="answers" id="add-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('addition')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('addition')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ilkokul">Geri</button>
</div>
</section>

<section id="subtraction" class="panel hidden">
<h2>Çıkarma Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="sub-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="sub-question"></div>
<div class="answers" id="sub-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('subtraction')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('subtraction')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ilkokul">Geri</button>
</div>
</section>

<section id="multiplication" class="panel hidden">
<h2>Çarpma Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="mul-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="mul-question"></div>
<div class="answers" id="mul-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('multiplication')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('multiplication')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ilkokul">Geri</button>
</div>
</section>

<section id="division" class="panel hidden">
<h2>Bölme Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="div-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="div-question"></div>
<div class="answers" id="div-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('division')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('division')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ilkokul">Geri</button>
</div>
</section>

<section id="geometryGame" class="panel hidden">
  <h2>Geometri Oyunu</h2>
  <div class="game-area">
    <div class="status-row">
      <span>Skor: <span id="geo-score">0</span></span>
      <span>Süre: <span> Sınırsız </span></span>    </div>
    <div class="question" id="geo-question" style="font-size: 60px; height: 120px; display: flex; align-items: center; justify-content: center; background: #eee; border-radius: 8px; margin-bottom: 15px;"></div>
    <div class="answers" id="geo-answers"></div>
  </div>
  <div class="game-header controls" style="margin-top:1rem;">
    <button class="btn" onclick="window.renderLeaderboardForGame('geometryGame')">En Yüksek Skorlar</button>
    <button class="btn" onclick="window.submitScoreUI('geometryGame')">Bitir ve Skor Gönder</button>
    <button class="btn tab" data-target="ortaokul5">Geri</button>
  </div>
</section>

  <section id="angleGame" class="panel hidden">
  <h2>Açı Tahmin Oyunu</h2>
  <div class="game-area">
    <div class="status-row">
      <span>Skor: <span id="angle-score">0</span></span>
      <span>Süre: <span> Sınırsız </span></span>
    </div>
    
    <div id="angle-visual-container" style="background: white; border-radius: 10px; margin: 15px 0; display: flex; justify-content: center; align-items: center; padding: 20px;">
        <svg id="angle-svg" width="200" height="200" viewBox="0 0 200 200">
            <path id="angle-path" d="" fill="none" stroke="#333" stroke-width="3" />
            <circle cx="100" cy="150" r="4" fill="red" /> </svg>
    </div>

    <div class="question" id="angle-question" style="font-weight: bold; margin-bottom: 10px;">Bu açı kaç derece olabilir?</div>
    <div class="answers" id="angle-answers"></div>
  </div>

  <div class="game-header controls" style="margin-top:1rem;">
    <button class="btn" onclick="window.renderLeaderboardForGame('angleGame')">En Yüksek Skorlar</button>
    <button class="btn" onclick="window.submitScoreUI('angleGame')">Bitir ve Skor Gönder</button>
    <button class="btn tab" data-target="ortaokul5">Geri</button>
  </div>
</section>

<section id="triangleCircleGame" class="panel hidden">
  <h2>Çember ve Üçgen İlişkisi</h2>
  <div class="game-area">
    <div class="status-row">
      <span>Skor: <span id="tri-score">0</span></span>
      <span>Süre: <span>Sınırsız</span></span>
    </div>
    
    <div style="background: white; border-radius: 10px; margin: 15px 0; display: flex; justify-content: center; align-items: center; padding: 10px;">
        <svg id="tri-svg" width="250" height="200" viewBox="0 0 250 200">
            </svg>
    </div>

    <div class="question" style="font-weight: bold; margin-bottom: 10px;">
        Merkezler ve kesişim noktasıyla oluşan üçgen hangisidir?
    </div>
    <div class="answers" id="tri-answers"></div>
  </div>

  <div class="game-header controls" style="margin-top:1rem;">
    <button class="btn" onclick="window.renderLeaderboardForGame('triangleCircleGame')">En Yüksek Skorlar</button>
    <button class="btn" onclick="window.submitScoreUI('triangleCircleGame')">Bitir ve Skor Gönder</button>
    <button class="btn tab" data-target="ortaokul5">Geri</button>
  </div>
</section>

  <section id="numberGame" class="panel hidden">
  <h2>Çok Basamaklı Sayılar</h2>
  <div class="game-area">
    <div class="status-row">
      <span>Skor: <span id="num-score">0</span></span>
      <span>Süre: <span>Sınırsız</span></span>
    </div>
    
    <div class="question-container" style="background: #fdf6e3; padding: 20px; border-radius: 10px; margin-bottom: 15px; text-align: center; border: 2px solid #ddd;">
        <div id="num-display" style="font-size: 28px; font-weight: bold; color: #2c3e50; letter-spacing: 2px; margin-bottom: 10px; font-family: monospace;"></div>
        <div id="num-question-text" style="font-size: 18px; color: #d35400; font-weight: bold; min-height: 1.5em;"></div>
    </div>

    <div class="answers" id="num-answers" style="display: flex; flex-direction: column; gap: 8px;"></div>
  </div>

  <div class="game-header controls" style="margin-top:1rem;">
    <button class="btn" onclick="window.renderLeaderboardForGame('numberGame')">En Yüksek Skorlar</button>
    <button class="btn" onclick="window.submitScoreUI('numberGame')">Bitir ve Skor Gönder</button>
    <button class="btn tab" data-target="ortaokul5">Geri</button>
  </div>
</section>
  
  
<section id="primes" class="panel hidden">
<h2>Asal Sayılar Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="prime-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="prime-question"></div>
<div class="answers" id="prime-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('primes')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('primes')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="factors" class="panel hidden">
<h2>Çarpanlar Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="fac-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="fac-question"></div>
<div class="answers" id="fac-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('factors')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('factors')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="gcdlcm" class="panel hidden">
<h2>Ortak Bölen / Ortak Kat Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="gcd-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="gcd-question"></div>
<div class="answers" id="gcd-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('gcdlcm')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('gcdlcm')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="frac6" class="panel hidden">
<h2>Denk Kesirler Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="frac-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="frac-question"></div>
<div class="answers" id="frac-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('frac6')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('frac6')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="mixed" class="panel hidden">
<h2>Tam Sayılı → Bileşik Kesir</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="mix-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="mix-question"></div>
<div class="answers" id="mix-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('mixed')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('mixed')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="stats" class="panel hidden">
<h2>Ortalama / Ortanca / Tepe Değer</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="stat-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" id="stat-question"></div>
<div class="answers" id="stat-answers"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('stats')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('stats')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="ortaokul6">Geri</button>
</div>
</section>

<section id="shapes" class="panel hidden">
<h2>Şekiller Oyunu</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="shape-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
</div>
<div class="question" style="font-size:1.4rem;margin-bottom:1rem;">Hedef: <div id="target-shape-display" class="shape" style="display:inline-block;margin-left:1rem;"></div></div>
<div class="mem-board" id="shape-board" style="grid-template-columns:repeat(4,1fr);"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('shapes')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('shapes')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="hafiza">Geri</button>
</div>
</section>

<section id="memory" class="panel hidden">
<h2>Hafıza Kartları</h2>
<div class="game-area">
<div class="status-row">
<span>Skor: <span id="mem-score">0</span></span>
<span>Süre: <span> Sınırsız </span></span>
<span>Çift: <span id="mem-pairs">0</span>/8</span>
</div>
<div class="mem-board" id="mem-board"></div>
</div>
<div class="game-header controls" style="margin-top:1rem;">
<button class="btn" onclick="window.renderLeaderboardForGame('memory')">En Yüksek Skorlar</button>
<button class="btn" onclick="window.submitScoreUI('memory')">Bitir ve Skor Gönder</button>
<button class="btn tab" data-target="hafiza">Geri</button>
</div>
</section>

<section id="leaderboard" class="panel hidden">
<h2 id="lb-title">Leaderboard</h2>
<div id="lb-list" class="card" style="padding:0.6rem">Yükleniyor...</div>
<div class="small muted" id="lb-source-note" style="margin-top:0.6rem">Kaynak:</div>
<div style="margin-top:0.6rem"><button class="btn tab" data-target="home">Kapat</button></div>
</section>
</main>

<footer class="site-footer">
<div class="container">
<p>© <span id="year"></span> Matbilzek — FF Eğitsel Matematik Oyunları</p>
<p class="muted small">Sınırsız Süre • 10 puan • 3 doğru = +15 bonus</p>
</div>
</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').catch(() => {});
}
</script>

<script>
let currentTimer = null;

const gameInitFunctions = {
  addition: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('add-score');
    scoreEl.textContent = score;


    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }
    

    function gen() {
      // 3 basamaklı sayılar: 100-999
      const a = Math.floor(Math.random() * 900) + 100;
      const b = Math.floor(Math.random() * 900) + 100;
      const correct = a + b;  // Toplam en fazla 1998 olacak

      let opts = [correct];
      while (opts.length < 4) {
        // Yanlış şıkları doğru cevaba yakın üret (±50 civarı), negatif olmaması için kontrol
        let w = correct + Math.floor(Math.random() * 101) - 50;  // -50 ile +50 arası
        if (w > 0 && !opts.includes(w) && w !== correct) {
          opts.push(w);
        }
      }
      opts.sort(() => Math.random() - 0.5);

      document.getElementById('add-question').textContent = `${a} + ${b} = ?`;
      const ans = document.getElementById('add-answers');
      ans.innerHTML = '';

      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#add-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');

          if (o === correct) {
            score += 10;
            combo++;
            if (combo % 3 === 0) score += 15;
          } else {
            combo = 0;
          }
          scoreEl.textContent = score;

          setTimeout(() => {
            document.querySelectorAll('#add-answers button').forEach(b => {
              b.disabled = false;
              b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  subtraction: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('sub-score');
    
    scoreEl.textContent = score;
   
 if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }
    

    function gen() {
      // 3 basamaklı büyük sayı
      const a = Math.floor(Math.random() * 900) + 100; // 100-999
      // b, a'dan küçük veya eşit olsun (sonuç negatif olmasın)
      const b = Math.floor(Math.random() * a);
      const correct = a - b;

      let opts = [correct];
      while (opts.length < 4) {
        // Yanlış şıkları doğru cevaba yakın üret (±50 civarı)
        let w = correct + Math.floor(Math.random() * 101) - 50; // -50 ile +50 arası
        if (w >= 0 && !opts.includes(w) && w !== correct) {
          opts.push(w);
        }
      }
      opts.sort(() => Math.random() - 0.5);

      document.getElementById('sub-question').textContent = `${a} - ${b} = ?`;
      const ans = document.getElementById('sub-answers');
      ans.innerHTML = '';

      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#sub-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');

          if (o === correct) {
            score += 10;
            combo++;
            if (combo % 3 === 0) score += 15;
          } else {
            combo = 0;
          }
          scoreEl.textContent = score;

          setTimeout(() => {
            document.querySelectorAll('#sub-answers button').forEach(b => {
              b.disabled = false;
              b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

              
  multiplication: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('mul-score');
    
    scoreEl.textContent = score;
    

    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function gen() {
      // Rastgele çarpma tipi seçiyoruz
      const type = Math.floor(Math.random() * 5); // 0-4 arası 5 farklı tip

      let a, b;

      if (type === 0) {
        // 3 basamaklı × 1 basamaklı
        a = Math.floor(Math.random() * 900) + 100; // 100-999
        b = Math.floor(Math.random() * 9) + 1;     // 1-9
      } else if (type === 1) {
        // 3 basamaklı × 2 basamaklı
        a = Math.floor(Math.random() * 900) + 100; // 100-999
        b = Math.floor(Math.random() * 90) + 10;   // 10-99
      } else if (type === 2) {
        // 3 basamaklı × 3 basamaklı
        a = Math.floor(Math.random() * 900) + 100; // 100-999
        b = Math.floor(Math.random() * 900) + 100; // 100-999
      } else if (type === 3) {
        // 2 basamaklı × 1 basamaklı
        a = Math.floor(Math.random() * 90) + 10;   // 10-99
        b = Math.floor(Math.random() * 9) + 1;     // 1-9
      } else {
        // 2 basamaklı × 2 basamaklı
        a = Math.floor(Math.random() * 90) + 10;   // 10-99
        b = Math.floor(Math.random() * 90) + 10;   // 10-99
      }

      const correct = a * b;

      // Yanlış şıklar: doğru cevaba yakın değerler üretelim
      let opts = [correct];
      while (opts.length < 4) {
        // Doğru cevabın yaklaşık ±15% farkla yanlış şıklar
        const deviation = Math.floor(correct * 0.15);
        let w = correct + Math.floor(Math.random() * (deviation * 2 + 1)) - deviation;

        // Negatif olmasın ve zaten listede olmasın
        if (w > 0 && !opts.includes(w)) {
          opts.push(w);
        }
      }

      opts.sort(() => Math.random() - 0.5);

      document.getElementById('mul-question').textContent = `${a} × ${b} = ?`;
      const ans = document.getElementById('mul-answers');
      ans.innerHTML = '';

      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#mul-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');

          if (o === correct) {
            score += 10;
            combo++;
            if (combo % 3 === 0) score += 15;
          } else {
            combo = 0;
          }
          scoreEl.textContent = score;

          setTimeout(() => {
            document.querySelectorAll('#mul-answers button').forEach(b => {
              b.disabled = false;
              b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },


division: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('div-score');
    
    scoreEl.textContent = score;
    

     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function gen() {
      // Rastgele bölen (divisor): 2 veya 3 basamaklı, 11-99 arası (10 ve 5 ile kolay bölünebilirlik için tercihli)
      const digitCount = Math.random() < 0.7 ? 2 : 3; // %70 2 basamaklı, %30 3 basamaklı
      let divisor;
      if (digitCount === 2) {
        // 2 basamaklı: 11-99, özellikle 10, 20, 25, 30, 40, 50, 60, 75, 80 gibi kolay olanlar ağırlıklı
        const easyDivisors = [10, 12, 15, 20, 25, 30, 40, 50, 60, 75, 80, 90];
        divisor = easyDivisors[Math.floor(Math.random() * easyDivisors.length)];
      } else {
        // 3 basamaklı nadir, ama mümkün (örneğin 100, 125, 150 gibi)
        const easyBig = [100, 125, 150, 200, 250, 300, 400, 500];
        divisor = easyBig[Math.floor(Math.random() * easyBig.length)];
      }

      // Bölüm (quotient): 5-50 arası (sonuç mantıklı ve zihinden hesaplanabilir olsun)
      const quotient = Math.floor(Math.random() * 46) + 5; // 5-50

      // Bölünen sayı: divisor * quotient → tam bölünüyor ve genellikle 0 ile bitiyor
      const dividend = divisor * quotient;

      const correct = quotient;

      // Yanlış şıklar: doğru cevaba yakın (±10 civarı), pozitif ve tekrarsız
      let opts = [correct];
      while (opts.length < 4) {
        let w = correct + Math.floor(Math.random() * 21) - 10; // -10 ile +10 arası
        if (w > 0 && !opts.includes(w)) {
          opts.push(w);
        }
      }

      opts.sort(() => Math.random() - 0.5);

      document.getElementById('div-question').textContent = `${dividend} ÷ ${divisor} = ?`;
      const ans = document.getElementById('div-answers');
      ans.innerHTML = '';

      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#div-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');

          if (o === correct) {
            score += 10;
            combo++;
            if (combo % 3 === 0) score += 15;
          } else {
            combo = 0;
          }
          scoreEl.textContent = score;

          setTimeout(() => {
            document.querySelectorAll('#div-answers button').forEach(b => {
              b.disabled = false;
              b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },


  geometryGame: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('geo-score');
    const questionEl = document.getElementById('geo-question');
    const ansContainer = document.getElementById('geo-answers');

    scoreEl.textContent = score;

    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const shapes = [
      { name: "Nokta", draw: "." },
      { name: "Doğru", draw: "⟷" },
      { name: "Doğru Parçası", draw: "—" },
      { name: "Işın", draw: "→" },
      { name: "Açı", draw: "∠" },
      { name: "Çember", draw: "O" },
      { name: "Dikme", draw: "⊥" }
    ];

    function gen() {
      const correctShape = shapes[Math.floor(Math.random() * shapes.length)];
      questionEl.textContent = correctShape.draw;
      
      let opts = [correctShape.name];
      while (opts.length < 4) {
        let r = shapes[Math.floor(Math.random() * shapes.length)].name;
        if (!opts.includes(r)) opts.push(r);
      }
      opts.sort(() => Math.random() - 0.5);

      ansContainer.innerHTML = '';
      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#geo-answers button').forEach(b => b.disabled = true);
          
          if (o === correctShape.name) {
            btn.classList.add('correct');
            score += 10;
            combo++;
            if (combo % 3 === 0) score += 15;
          } else {
            btn.classList.add('wrong');
            combo = 0;
          }
          scoreEl.textContent = score;

          setTimeout(() => {
            gen();
          }, 600);
        };
        ansContainer.appendChild(btn);
      });
    }
    gen();
},


  angleGame: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('angle-score');
    const ansContainer = document.getElementById('angle-answers');
    const anglePath = document.getElementById('angle-path');

    scoreEl.textContent = score;

    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function drawAngle(degree) {
        const cx = 100; // Merkez X
        const cy = 150; // Merkez Y (Tabanda)
        const r = 80;   // Kol uzunluğu
        
        // İlk kol her zaman yatay (sağa doğru)
        const x1 = cx + r;
        const y1 = cy;
        
        // İkinci kol açığa göre hesaplanır (Radyan cinsinden)
        const rad = (degree * Math.PI) / 180;
        const x2 = cx + r * Math.cos(-rad); // SVG'de Y aşağı artar, bu yüzden -rad
        const y2 = cy + r * Math.sin(-rad);
        
        // SVG Path oluşturma: Merkeze git -> İlk kola git -> Merkeze dön -> İkinci kola git
        anglePath.setAttribute('d', `M ${x1} ${y1} L ${cx} ${cy} L ${x2} ${y2}`);
    }

    function gen() {
        // 10 ile 170 derece arası rastgele bir açı seç (5'in katları olması kolaylık sağlar)
        const correctDegree = (Math.floor(Math.random() * 33) + 2) * 5; 
        drawAngle(correctDegree);

        // Şıkları oluştur
        let opts = [correctDegree];
        while (opts.length < 4) {
            let offset = (Math.floor(Math.random() * 5) - 2) * 10; // ±10 veya ±20 fark
            let wrong = correctDegree + (offset === 0 ? 15 : offset);
            if (wrong > 0 && wrong <= 180 && !opts.includes(wrong)) {
                opts.push(wrong);
            }
        }
        opts.sort(() => Math.random() - 0.5);

        ansContainer.innerHTML = '';
        opts.forEach(o => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = o + "°";
            btn.onclick = () => {
                if (btn.disabled) return;
                document.querySelectorAll('#angle-answers button').forEach(b => b.disabled = true);
                
                if (o === correctDegree) {
                    btn.classList.add('correct');
                    score += 15; // Açı ölçme daha zor olduğu için puanı artırdık
                    combo++;
                    if (combo % 3 === 0) score += 20;
                } else {
                    btn.classList.add('wrong');
                    combo = 0;
                }
                scoreEl.textContent = score;

                setTimeout(() => {
                    gen();
                }, 800);
            };
            ansContainer.appendChild(btn);
        });
    }

    gen();
},


triangleCircleGame: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('tri-score');
    const ansContainer = document.getElementById('tri-answers');
    const svg = document.getElementById('tri-svg');

    scoreEl.textContent = score;

    // Varsa eski zamanlayıcıyı durdur
    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function gen() {
        const types = ["Eşkenar Üçgen", "İkizkenar Üçgen", "Çeşitkenar Üçgen"];
        const targetType = types[Math.floor(Math.random() * types.length)];
        
        let r1, r2, d; // r1: 1.çember, r2: 2.çember, d: merkezler arası mesafe
        
        // Üçgen eşitsizliği ve tiplerine göre değer belirleme
        if (targetType === "Eşkenar Üçgen") {
            r1 = r2 = d = 70; // Tüm kenarlar eşit
        } else if (targetType === "İkizkenar Üçgen") {
            r1 = r2 = 80; d = 60; // İki yarıçap eşit, merkez mesafesi farklı
        } else {
            r1 = 90; r2 = 60; d = 70; // Tüm kenarlar farklı
        }

        // Çizim koordinatları
        const c1x = 70, c1y = 100;
        const c2x = c1x + d, c2y = 100;

        // Kesişim noktasını bulma (Trigonometrik hesaplama)
        const cosA = (r1*r1 + d*d - r2*r2) / (2 * r1 * d);
        const sinA = Math.sqrt(1 - cosA * cosA);
        const kx = c1x + r1 * cosA;
        const ky = c1y - r1 * sinA;

        // SVG İçeriğini Oluştur
        svg.innerHTML = `
            <circle cx="${c1x}" cy="${c1y}" r="${r1}" fill="none" stroke="#add8e6" stroke-width="2" />
            <circle cx="${c2x}" cy="${c2y}" r="${r2}" fill="none" stroke="#ffb6c1" stroke-width="2" />
            <path d="M ${c1x} ${c1y} L ${c2x} ${c2y} L ${kx} ${ky} Z" fill="rgba(255,255,0,0.2)" stroke="black" stroke-width="3" />
            <circle cx="${c1x}" cy="${c1y}" r="4" fill="blue" />
            <circle cx="${c2x}" cy="${c2y}" r="4" fill="red" />
            <circle cx="${kx}" cy="${ky}" r="4" fill="black" />
        `;

        // Şıkları oluştur
        ansContainer.innerHTML = '';
        types.forEach(o => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = o;
            btn.onclick = () => {
                if (btn.disabled) return;
                document.querySelectorAll('#tri-answers button').forEach(b => b.disabled = true);
                
                if (o === targetType) {
                    btn.classList.add('correct');
                    score += 20;
                    combo++;
                } else {
                    btn.classList.add('wrong');
                    combo = 0;
                }
                scoreEl.textContent = score;
                setTimeout(gen, 800);
            };
            ansContainer.appendChild(btn);
        });
    }

    gen();
},


numberGame = function() {
    let score = 0;
    const scoreEl = document.getElementById('num-score');
    const displayEl = document.getElementById('num-display');
    const questionTextEl = document.getElementById('num-question-text');
    const ansContainer = document.getElementById('num-answers');

    if (scoreEl) scoreEl.textContent = score;

    // Diğer oyunlardan kalan zamanlayıcıyı durdur
    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const basamaklar = [
        "Birler Basamağı", "Onlar Basamağı", "Yüzler Basamağı",
        "Binler Basamağı", "On Binler Basamağı", "Yüz Binler Basamağı",
        "Milyonlar Basamağı", "On Milyonlar Basamağı", "Yüz Milyonlar Basamağı"
    ];

    function sayiyiOku(n) {
        if (n === 0) return "sıfır";
        const birler = ["", "bir", "iki", "üç", "dört", "beş", "altı", "yedi", "sekiz", "dokuz"];
        const onlar = ["", "on", "yirmi", "otuz", "kırk", "elli", "altmış", "yetmiş", "seksen", "doksan"];
        const binler = ["", "bin", "milyon"];
        let sonuc = "";
        let grupSayisi = 0;
        let tempN = n;
        while (tempN > 0) {
            let uc = tempN % 1000;
            if (uc > 0) {
                let s = "";
                let y = Math.floor(uc / 100);
                let o = Math.floor((uc % 100) / 10);
                let b = uc % 10;
                if (y > 0) s += (y === 1 ? "" : birler[y]) + "yüz";
                if (o > 0) s += onlar[o];
                if (b > 0) {
                    if (grupSayisi === 1 && b === 1 && y === 0 && o === 0) {} 
                    else { s += birler[b]; }
                }
                sonuc = s + binler[grupSayisi] + " " + sonuc;
            } else if (grupSayisi === 1 && Math.floor(n / 1000) % 1000 === 0 && n > 1000000) {
                // Özel durumlar için
            }
            tempN = Math.floor(tempN / 1000);
            grupSayisi++;
        }
        return sonuc.trim();
    }

    function generateUniqueDigitNumber(length) {
        let pool = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
        let res = [];
        let firstIdx = Math.floor(Math.random() * 9) + 1;
        res.push(pool[firstIdx]);
        pool.splice(firstIdx, 1);
        pool.sort(() => Math.random() - 0.5);
        for(let i = 0; i < length - 1; i++) res.push(pool[i]);
        return parseInt(res.join(''));
    }

    function gen() {
        const len = Math.floor(Math.random() * 4) + 6; // 6-9 basamak
        const sayi = generateUniqueDigitNumber(len);
        const soruTipi = Math.floor(Math.random() * 2); 
        let correct = "";
        let options = [];

        displayEl.textContent = sayi.toLocaleString('tr-TR');

        if (soruTipi === 0) {
            questionTextEl.textContent = "Bu sayının okunuşu hangisidir?";
            correct = sayiyiOku(sayi);
            options = [correct];
            while(options.length < 4) {
                let yanlis = sayiyiOku(generateUniqueDigitNumber(len));
                if(!options.includes(yanlis)) options.push(yanlis);
            }
        } else {
            const idx = Math.floor(Math.random() * len);
            const rakam = String(sayi).split('').reverse()[idx];
            questionTextEl.innerHTML = `<span style="color:blue; font-size:24px;">${rakam}</span> rakamı hangi basamaktadır?`;
            correct = basamaklar[idx];
            options = [correct];
            while(options.length < 4) {
                let yanlis = basamaklar[Math.floor(Math.random() * 9)];
                if(!options.includes(yanlis)) options.push(yanlis);
            }
        }

        options.sort(() => Math.random() - 0.5);
        ansContainer.innerHTML = '';
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.style.textAlign = "left";
            btn.style.padding = "10px";
            btn.textContent = opt;
            btn.onclick = () => {
                if (btn.disabled) return;
                document.querySelectorAll('#num-answers button').forEach(b => b.disabled = true);
                if (opt === correct) {
                    btn.classList.add('correct');
                    score += 10;
                } else {
                    btn.classList.add('wrong');
                }
                if (scoreEl) scoreEl.textContent = score;
                setTimeout(gen, 1000);
            };
            ansContainer.appendChild(btn);
        });
    }

    gen();
},

  
  
  primes: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('prime-score');
    const timeEl = document.getElementById('prime-time');
    scoreEl.textContent = score;
 
     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const isPrime = n => {
      if (n <= 1) return false;
      for (let i = 2; i <= Math.sqrt(n); i++) if (n % i === 0) return false;
      return true;
    };

    function gen() {
      const num = Math.floor(Math.random() * 99) + 2;
      const correct = isPrime(num) ? 'Evet' : 'Hayır';
      document.getElementById('prime-question').textContent = `${num} asal sayı mı?`;
      const ans = document.getElementById('prime-answers'); ans.innerHTML = '';
      ['Evet', 'Hayır'].forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#prime-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');
          if (o === correct) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
          } else combo = 0;
          scoreEl.textContent = score;
          setTimeout(() => {
            document.querySelectorAll('#prime-answers button').forEach(b => {
              b.disabled = false; b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  factors: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('fac-score');
   
    scoreEl.textContent = score;

     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const getFactorsStr = n => {
      let f = [];
      for (let i = 1; i <= n; i++) if (n % i === 0) f.push(i);
      return f.join(', ');
    };

    function gen() {
      const num = Math.floor(Math.random() * 50) + 10;
      const correct = getFactorsStr(num);
      let opts = [correct];
      while (opts.length < 4) {
        const wrongNum = num + Math.floor(Math.random() * 10 - 5);
        const w = wrongNum > 1 ? getFactorsStr(wrongNum) : '1';
        if (!opts.includes(w)) opts.push(w);
      }
      opts.sort(() => Math.random() - 0.5);
      document.getElementById('fac-question').textContent = `${num} sayısının çarpanları?`;
      const ans = document.getElementById('fac-answers'); ans.innerHTML = '';
      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#fac-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');
          if (o === correct) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
          } else combo = 0;
          scoreEl.textContent = score;
          setTimeout(() => {
            document.querySelectorAll('#fac-answers button').forEach(b => {
              b.disabled = false; b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  gcdlcm: function() {
    let score = 0,  combo = 0;
    const scoreEl = document.getElementById('gcd-score');
    
    scoreEl.textContent = score;
  
     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);
    const lcm = (a, b) => (a * b) / gcd(a, b);

    function gen() {
      const a = Math.floor(Math.random() * 30) + 5;
      const b = Math.floor(Math.random() * 30) + 5;
      const isGcd = Math.random() > 0.5;
      const correct = isGcd ? gcd(a, b) : lcm(a, b);
      let opts = [correct];
      while (opts.length < 4) {
        let w = correct + Math.floor(Math.random() * 11 - 5);
        if (w > 0 && !opts.includes(w)) opts.push(w);
      }
      opts.sort(() => Math.random() - 0.5);
      document.getElementById('gcd-question').textContent = `${a} ve ${b}'nin ${isGcd ? 'Ortak Böleni' : 'Ortak Katı'} nedir?`;
      const ans = document.getElementById('gcd-answers'); ans.innerHTML = '';
      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#gcd-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');
          if (o === correct) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
          } else combo = 0;
          scoreEl.textContent = score;
          setTimeout(() => {
            document.querySelectorAll('#gcd-answers button').forEach(b => {
              b.disabled = false; b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  frac6: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('frac-score');
    
    scoreEl.textContent = score;
   
    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function gen() {
      const pay = Math.floor(Math.random() * 10) + 1;
      const payda = Math.floor(Math.random() * 9) + 2;
      const carp = Math.floor(Math.random() * 5) + 2;
      const correct = `${pay * carp}/${payda * carp}`;
      let opts = [correct];
      while (opts.length < 4) {
        const wrongPay = pay * carp + Math.floor(Math.random() * 5 - 2);
        const w = `${wrongPay}/${payda * carp}`;
        if (!opts.includes(w)) opts.push(w);
      }
      opts.sort(() => Math.random() - 0.5);
      document.getElementById('frac-question').innerHTML = `${pay}/${payda} ile denk kesir?`;
      const ans = document.getElementById('frac-answers'); ans.innerHTML = '';
      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.innerHTML = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#frac-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');
          if (o === correct) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
          } else combo = 0;
          scoreEl.textContent = score;
          setTimeout(() => {
            document.querySelectorAll('#frac-answers button').forEach(b => {
              b.disabled = false; b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  mixed: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('mix-score');
    
    scoreEl.textContent = score;
    
     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    function gen() {
      const tam = Math.floor(Math.random() * 6) + 1;
      const pay = Math.floor(Math.random() * 8) + 1;
      const payda = Math.floor(Math.random() * 7) + 3;
      const correct = `${tam * payda + pay}/${payda}`;
      let opts = [correct];
      while (opts.length < 4) {
        const wrongPay = tam * payda + pay + Math.floor(Math.random() * 9 - 4);
        const w = `${wrongPay}/${payda}`;
        if (!opts.includes(w)) opts.push(w);
      }
      opts.sort(() => Math.random() - 0.5);
      
      document.getElementById('mix-question').innerHTML = `<strong>${tam}</strong> tam <strong>${pay}</strong> bölü <strong>${payda}</strong> bileşik kesire çevir`;
      
      const ans = document.getElementById('mix-answers'); ans.innerHTML = '';
      
      opts.forEach(o => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.innerHTML = o;
        btn.onclick = () => {
          if (btn.disabled) return;
          document.querySelectorAll('#mix-answers button').forEach(b => b.disabled = true);
          btn.classList.add(o === correct ? 'correct' : 'wrong');
          if (o === correct) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
          } else combo = 0;
          scoreEl.textContent = score;
          setTimeout(() => {
            document.querySelectorAll('#mix-answers button').forEach(b => {
              b.disabled = false; b.classList.remove('correct', 'wrong');
            });
            gen();
          }, 800);
        };
        ans.appendChild(btn);
      });
    }
    gen();
  },

  stats: function() {
  let score = 0, combo = 0;
  const scoreEl = document.getElementById('stat-score');
  
  scoreEl.textContent = score;
  
   if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }
    
  // Tepe değer bul: en çok tekrar eden sayılar (çoklu olabilir)
  const getModes = arr => {
    const freq = {};
    arr.forEach(n => freq[n] = (freq[n] || 0) + 1);
    let maxCount = 0;
    for (let num in freq) {
      if (freq[num] > maxCount) maxCount = freq[num];
    }
    // Maksimum tekrar sayısı 1 ise → Yok
    if (maxCount === 1) return ['Yok'];
    // En yüksek tekrara sahip tüm sayıları topla
    const modes = [];
    for (let num in freq) {
      if (freq[num] === maxCount) modes.push(num);
    }
    // Sıralı olsun diye sort yap
    return modes.sort((a, b) => a - b);
  };
  const mean = arr => (arr.reduce((a,b)=>a+b,0)/arr.length).toFixed(1);
  const median = arr => {
    const s = [...arr].sort((a,b)=>a-b);
    const m = Math.floor(s.length/2);
    return s.length % 2 === 0 ? ((s[m-1] + s[m]) / 2).toFixed(1) : s[m];
  };
  function gen() {
    // 5-8 tane doğal sayı
    const nums = Array.from({length: Math.floor(Math.random() * 4) + 5}, () => Math.floor(Math.random() * 20) + 1);
    const type = Math.floor(Math.random() * 3);
    let correct, qType;
    if (type === 0) {
      correct = mean(nums); // sayı veya x.x formatında string
      qType = 'Aritmetik Ortalama';
    } else if (type === 1) {
      correct = median(nums);
      qType = 'Ortanca';
    } else {
      const modes = getModes(nums);
      // Doğru cevap: "Yok" ya da "3 ve 5" gibi birleştirilmiş string
      correct = modes.length === 1 && modes[0] === 'Yok' ? 'Yok' : modes.join(' ve ');
      qType = 'Tepe Değer';
    }
    // Seçenekler oluştur
    let opts = [correct.toString()];
    while (opts.length < 4) {
      let w;
      if (qType === 'Tepe Değer') {
        // Tepe için mantıklı yanlış seçenekler
        if (Math.random() < 0.3 && !opts.includes('Yok')) {
          w = 'Yok';
        } else {
          // Rastgele bir sayı veya yanlış birleştirme
          const randomNum = Math.floor(Math.random() * 20) + 1;
          const another = Math.floor(Math.random() * 20) + 1;
          w = randomNum === another ? randomNum.toString() : `${randomNum} ve ${another}`;
        }
      } else {
        // Ortalama ve ortanca için
        w = (parseFloat(correct) + (Math.random() * 4 - 2)).toFixed(1);
      }
      if (!opts.includes(w)) opts.push(w);
    }
    opts.sort(() => Math.random() - 0.5);
    document.getElementById('stat-question').textContent =
      `${nums.join(', ')} sayılarının ${qType}?`;
    const ans = document.getElementById('stat-answers');
    ans.innerHTML = '';
    opts.forEach(o => {
      const btn = document.createElement('button');
      btn.className = 'answer-btn';
      btn.textContent = o;
      btn.onclick = () => {
        if (btn.disabled) return;
        document.querySelectorAll('#stat-answers button').forEach(b => b.disabled = true);
        // Doğru kontrol: string karşılaştırma
        const isCorrect = o === correct.toString();
        btn.classList.add(isCorrect ? 'correct' : 'wrong');
        if (isCorrect) {
          score += 10; combo++;
          if (combo % 3 === 0) score += 15;
        } else {
          combo = 0;
        }
        scoreEl.textContent = score;
        setTimeout(() => {
          document.querySelectorAll('#stat-answers button').forEach(b => {
            b.disabled = false;
            b.classList.remove('correct', 'wrong');
          });
          gen();
        }, 800);
      };
      ans.appendChild(btn);
    });
  }
  gen();
},

  shapes: function() {
    let score = 0, combo = 0;
    const scoreEl = document.getElementById('shape-score');
    
    scoreEl.textContent = score;
    
    if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const shapes = ['circle','square','triangle','star'];

    function gen() {
      const target = shapes[Math.floor(Math.random()*4)];
      document.getElementById('target-shape-display').className = `shape ${target}`;
      const board = document.getElementById('shape-board'); board.innerHTML = '';
      let cards = [target];
      while (cards.length < 8) {
        cards.push(shapes.filter(s=>s!==target)[Math.floor(Math.random()*3)]);
      }
      cards.sort(() => Math.random() - 0.5);
      cards.forEach(sh => {
        const div = document.createElement('div');
        div.className = `shape ${sh}`;
        div.onclick = () => {
          if (div.dataset.clicked) return;
          div.dataset.clicked = '1';
          if (sh === target) {
            score += 10; combo++;
            if (combo % 3 === 0) score += 15;
            div.style.background = '#b2ffba';
          } else {
            combo = 0;
            div.style.background = '#ff9e9e';
          }
          scoreEl.textContent = score;
          setTimeout(gen, 600);
        };
        board.appendChild(div);
      });
    }
    gen();
  },

  memory: function() {
    let score = 0, combo = 0, pairsFound = 0, flipped = [], lock = false;
    const scoreEl = document.getElementById('mem-score');
    const pairsEl = document.getElementById('mem-pairs');
   
    scoreEl.textContent = score;
    pairsEl.textContent = pairsFound;
   
     if (typeof currentTimer !== 'undefined' && currentTimer) {
        clearInterval(currentTimer);
        currentTimer = null;
    }

    const symbols = ['🍎','🍌','🍇','🍊','🍉','🍓','🥝','🍍','🍎','🍌','🍇','🍊','🍉','🍓','🥝','🍍'].sort(() => Math.random() - 0.5);
    const board = document.getElementById('mem-board');
    board.innerHTML = '';
    symbols.forEach(sym => {
      const card = document.createElement('div');
      card.className = 'mem-card';
      card.dataset.symbol = sym;
      card.onclick = () => {
        if (lock || flipped.length === 2 || card.classList.contains('flipped')) return;
        card.classList.add('flipped');
        card.textContent = sym;
        flipped.push(card);
        if (flipped.length === 2) {
          lock = true;
          setTimeout(() => {
            if (flipped[0].dataset.symbol === flipped[1].dataset.symbol) {
              flipped.forEach(c => c.classList.add('matched'));
              pairsFound++;
              score += 10; combo++;
              if (combo % 3 === 0) score += 15;
              pairsEl.textContent = pairsFound;
              if (pairsFound === 8) {
                clearInterval(currentTimer);
                currentTimer = null;
                window._saveLocalScore('memory', score);
              }
            } else {
              flipped.forEach(c => { c.classList.remove('flipped'); c.textContent = ''; });
              combo = 0;
            }
            scoreEl.textContent = score;
            flipped = [];
            lock = false;
          }, 1000);
        }
      };
      board.appendChild(card);
    });
  }
};

// Panel ve oyun geçiş yönetimi
document.addEventListener('click', function(e) {
  if (e.target.matches('.tab') || e.target.matches('.go')) {
    const targetId = e.target.dataset.target;

    // Tüm panelleri gizle
    document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));

    // Hedef paneli göster
    const targetPanel = document.getElementById(targetId);
    if (targetPanel) targetPanel.classList.remove('hidden');

    // Tab aktifliğini güncelle
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    const activeTab = document.querySelector(`.tab[data-target="${targetId}"]`);
    if (activeTab) activeTab.classList.add('active');

    // Eğer oyun paneliyse başlat
    if (gameInitFunctions[targetId]) {
      if (currentTimer) clearInterval(currentTimer);
      currentTimer = null;

      const scoreEls = targetPanel.querySelectorAll('[id$="-score"]');
      scoreEls.forEach(el => el.textContent = '0');
      
      if (targetPanel.querySelector('#mem-pairs')) targetPanel.querySelector('#mem-pairs').textContent = '0';

      gameInitFunctions[targetId]();
    }
  }
});
</script>
  

<script src="app.js"></script>
  
  <script>
// Ziyaretçi sayacı – anasayfada her yüklenmede artar
function updateVisitorCount() {
  const STORAGE_KEY = 'site_ziyaretci_sayaci_2025';  // benzersiz anahtar

  let count = localStorage.getItem(STORAGE_KEY);
  count = count ? parseInt(count, 10) : 0;
  
  count += 1;
  localStorage.setItem(STORAGE_KEY, count);

  const countEl = document.getElementById('visitor-count');
  if (countEl) {
    countEl.textContent = count.toLocaleString('tr-TR');  // 1.234 gibi okunaklı format
  }
}

// Sayfa yüklendiğinde çalıştır
document.addEventListener('DOMContentLoaded', updateVisitorCount);
</script>
  
<!-- Ziyaretçi Sayacı - Sayfa Altı -->
<footer class="site-footer" style="text-align: center; padding: 20px 15px; background: #f8f9fa; border-top: 1px solid #e0e0e0; font-size: 0.95rem; color: #555; margin-top: 40px;">
  <div class="visitor-counter">
    <span style="margin-right: 6px;">👥</span>
    Bu siteyi ziyaret eden kişi sayısı: 
    <strong id="visitor-count" style="color: #e53e3e; font-weight: 600;">0</strong>
  </div>
  <div style="margin-top: 8px; font-size: 0.85rem; color: #777;">
  
  </div>
</footer>
  
</body>
</html>
